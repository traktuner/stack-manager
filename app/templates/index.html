{% extends "base.html" %}

{% block content %}
<section id="actions">
    <div class="grid">
        <button class="secondary" hx-post="/api/stacks/upgrade" hx-target="#modal-content" hx-swap="innerHTML">
            Upgrade All
        </button>
        <button class="secondary" hx-post="/api/stacks/pull" hx-target="#modal-content" hx-swap="innerHTML">
            Pull All
        </button>
        <button class="secondary" hx-post="/api/update" hx-target="#modal-content" hx-swap="innerHTML">
            Update
        </button>
        <button class="secondary outline" hx-post="/api/cleanup" hx-target="#modal-content" hx-swap="innerHTML"
                hx-confirm="Run docker system prune? This removes unused images, containers, and volumes.">
            Cleanup
        </button>
    </div>
</section>

<section id="stack-list" hx-get="/api/stacks" hx-trigger="load, every 10s" hx-swap="innerHTML">
    <article aria-busy="true">Loading stacks...</article>
</section>

<dialog id="output-modal">
    <article>
        <header>
            <button aria-label="Close" rel="prev" onclick="closeModal()"></button>
            <span id="modal-title">Command Output</span>
        </header>
        <div id="modal-content">
            <pre class="output-pre">No command running.</pre>
        </div>
    </article>
</dialog>
{% endblock %}
